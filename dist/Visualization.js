(()=>{var m=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(C,N)=>(typeof require<"u"?require:C)[N]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});(()=>{var h=Object.create,C=Object.defineProperty,N=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,q=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,F=(o=>typeof m<"u"?m:typeof Proxy<"u"?new Proxy(o,{get:(t,r)=>(typeof m<"u"?m:t)[r]}):o)(function(o){if(typeof m<"u")return m.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')}),U=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports),V=(o,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of I(t))!A.call(o,l)&&l!==r&&C(o,l,{get:()=>t[l],enumerable:!(a=N(t,l))||a.enumerable});return o},B=(o,t,r)=>(r=o!=null?h(q(o)):{},V(t||!o||!o.__esModule?C(r,"default",{value:o,enumerable:!0}):r,o)),R=U((o,t)=>{(function(r,a){typeof o=="object"&&typeof t<"u"?a(o):typeof define=="function"&&define.amd?define(["exports"],a):(r=typeof globalThis<"u"?globalThis:r||self,a(r.leaflet={}))})(o,function(r){"use strict";var a="1.9.4",l="1.9.4",p=Object.freeze;Object.freeze=function(i){return i};var g=Object.create,u=Object.defineProperty,P=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,j=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,y=(i,f)=>()=>(f||i((f={exports:{}}).exports,f),f.exports),v=(i,f,E,D)=>{if(f&&typeof f=="object"||typeof f=="function")for(let T of x(f))!k.call(i,T)&&T!==E&&u(i,T,{get:()=>f[T],enumerable:!(D=P(f,T))||D.enumerable});return i},n=(i,f,E)=>(E=i!=null?g(j(i)):{},v(f||!i||!i.__esModule?u(E,"default",{value:i,enumerable:!0}):E,i)),O={},s={},d="1.9.4",e=navigator.userAgent.toLowerCase(),b=!!~e.indexOf("trident"),le=!!~e.indexOf("gecko/"),J=!!~e.indexOf("chrome"),fe=!!~e.indexOf("safari")&&!J,S=!!~e.indexOf("android"),se=!!~e.indexOf("primeframe"),W=!!~e.indexOf("msie"),pe=W||b,Y=!!~e.indexOf("edge"),ue=!!~e.indexOf("primeframe"),K=typeof orientation<"u"||!!~e.indexOf("mobile"),be=S||!!~e.indexOf("android 3")||!!~e.indexOf("silk/"),ge=!!~e.indexOf("xoom"),xe=!!~e.indexOf("sch-i800"),Oe=!!~e.indexOf("blackberry"),Q=!!~e.indexOf("playbook"),Z=!!~e.indexOf("bb10"),z=!!~e.indexOf("rimnet"),me=Q||Z||z,ee=!!~e.indexOf("ipad"),te=!!~e.indexOf("ipod"),H=!!~e.indexOf("iphone"),oe=ee||te||H,he=!!~e.indexOf("mobile")&&oe,ye=!!~e.indexOf("cfnetwork"),ve=!!~e.indexOf("mac os"),we=!!~e.indexOf("macintosh"),re=!!~e.indexOf("firefox"),Le=re&&!!~e.indexOf("mobile"),je=!!~e.indexOf("chrome")&&(H||S),ne=!!~e.indexOf("touch"),ie=window.PointerEvent||window.MSPointerEvent,ae=!window.L_NO_TOUCH&&(ne||ie),Ee=!window.L_NO_TOUCH&&ae,Te=K,Ce=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1,de=!!document.createElement("canvas").getContext,Pe=!window.L_PREFER_CANVAS&&de&&!Y,ke=!!~e.indexOf("android 2")||!!~e.indexOf("android 3")||!!~e.indexOf("opera mini")||!!~e.indexOf("opera mobi"),Ne=!!window.L_NO_WEBGL||!function(){try{var i=document.createElement("canvas").getContext("webgl");return!!i&&i.getShaderInfoLog(i.createShader(i.VERTEX_SHADER))===""}catch{return!1}}(),Me=e.indexOf("seamonkey")!==-1||e.indexOf("sailfish")!==-1,_e=e.indexOf("wkwebview")!==-1,Se=e.indexOf("brave")!==-1,He=e.indexOf("duckduckgo")!==-1,ce=window.L;r.noConflict=function(){return window.L=ce,this},window.L=r})});let w=B(R()),_=F("@google/dscc"),c=null,M=null,L=null,$=()=>{let o="leaflet-legend-style";if(document.getElementById(o))return;let t=document.createElement("style");t.id=o,t.innerHTML=`
      .info.legend {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.8);
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        border-radius: 5px;
        line-height: 18px;
        color: #555;
      }
      .legend i {
        width: 18px;
        height: 18px;
        float: left;
        margin-right: 8px;
        opacity: 0.8;
      }
    `,document.head.appendChild(t)},X=o=>{let t=o.filter(a=>typeof a=="number"&&isFinite(a)).sort((a,l)=>a-l);return t.length<5?[0,1,2,3]:[.2,.4,.6,.8].map(a=>{let l=(t.length-1)*a,p=Math.floor(l),g=l-p;return t[p+1]!==void 0?Math.round(t[p]+g*(t[p+1]-t[p])):Math.round(t[p])})},G=o=>{let t=o.fields,r=o.style,a=o.tables.DEFAULT,l=t.findIndex(n=>n.id==="barrio"),p=t.findIndex(n=>n.id==="valor"),g=document.body;g.innerHTML="";let u=document.createElement("div");u.style.width="100%",u.style.height="100%",g.appendChild(u),c?(c.remove(),c.off(),c.getContainer().parentNode.removeChild(c.getContainer()),u.parentNode.replaceChild(c.getContainer(),u),c.invalidateSize()):(c=w.default.map(u).setView([-34.61,-58.38],12),w.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(c));let P={yellow:["#ffffcc","#fed976","#fd8d3c","#e31a1c","#800026"],greenToRed:["#2c7bb6","#abd9e9","#ffffbf","#fdae61","#d7191c"],blueToYellow:["#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],grayscale:["#f7f7f7","#cccccc","#969696","#636363","#252525"]},x=P[r.colorScale.value]||P.yellow,j={},k=[];a.forEach(n=>{let O=n[l],s=parseFloat(n[p])||0;j[O]=s,k.push(s)});let y=X(k),v=n=>n<=y[0]?x[0]:n<=y[1]?x[1]:n<=y[2]?x[2]:n<=y[3]?x[3]:x[4];fetch("https://storage.googleapis.com/mapa-barrios-degcba/barrios.geojson").then(n=>{if(!n.ok)throw new Error(`Error HTTP! estado: ${n.status}`);return n.json()}).then(n=>{M&&c.removeLayer(M),M=w.default.geoJSON(n,{style:function(O){let s=O.properties.nombre,d=j[s]||0;return{color:r.borderColor.value.color,weight:parseFloat(r.borderWidth.value),fillColor:v(d),fillOpacity:.7}},onEachFeature:function(O,s){if(r.showLabels.value){let d=O.properties.nombre,e=j[d]||0;s.bindTooltip(`${d}: ${e.toLocaleString()}`)}}}).addTo(c),L&&c.removeControl(L),r.showLegend.value&&($(),L=w.default.control({position:"bottomright"}),L.onAdd=function(O){let s=w.default.DomUtil.create("div","info legend"),d=[0,...y],e=b=>b.toLocaleString();s.innerHTML+='<i style="background:'+v(d[0])+'"></i> \u2264 '+e(d[1])+"<br>";for(let b=1;b<d.length-1;b++)s.innerHTML+='<i style="background:'+v(d[b]+1)+'"></i> '+e(d[b]+1)+"&ndash;"+e(d[b+1])+"<br>";return s.innerHTML+='<i style="background:'+v(d[d.length-1]+1)+'"></i> > '+e(d[d.length-1]),s},L.addTo(c))}).catch(n=>{console.error("Error al cargar o procesar el archivo GeoJSON:",n),g.innerHTML=`<div style="padding: 20px; text-align: center; color: red;">Error: No se pudo cargar el mapa de barrios. <br/>${n.message}</div>`})};_.subscribeToData(G,{transform:_.objectTransform})})();})();
