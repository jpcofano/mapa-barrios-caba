{
  "data": [
    {
      "id": "data",
      "label": "Datos",
      "elements": [
        {
          "id": "geoDimension",
          "label": "Dimensión geográfica (Barrio/Comuna)",
          "type": "DIMENSION",
          "min": 1,
          "max": 1
        },
        {
          "id": "metricPrimary",
          "label": "Métrica principal (para colorear)",
          "type": "METRIC",
          "min": 1,
          "max": 1
        }
      ]
    }
  ],
  "style": [
    {
      "id": "geographies",
      "label": "Geografía",
      "elements": [
        {
          "id": "nivelJerarquia",
          "label": "Nivel",
          "type": "SELECT",
          "options": [
            { "label": "Barrio", "value": "barrio" },
            { "label": "Comuna", "value": "comuna" }
          ],
          "defaultValue": "barrio"
        },
        {
          "id": "geojsonProperty",
          "label": "Propiedad personalizada del GeoJSON (opcional)",
          "type": "TEXTINPUT",
          "defaultValue": ""
        }
      ]
    },
    {
      "id": "coloring",
      "label": "Colores",
      "elements": [
        {
          "id": "colorScale",
          "label": "Escala base",
          "type": "SELECT",
          "options": [
            { "label": "Verde → Rojo",     "value": "greenToRed" },
            { "label": "Azul → Amarillo",  "value": "blueToYellow" },
            { "label": "Grises",           "value": "grayscale" },
            { "label": "Amarillos",        "value": "yellow" }
          ],
          "defaultValue": "greenToRed"
        },
        {
          "id": "invertScale",
          "label": "Invertir escala (Rojo → Verde / etc.)",
          "type": "CHECKBOX",
          "defaultValue": false
        },
        {
          "id": "colorPalette",
          "label": "Paleta (moderna)",
          "type": "SELECT",
          "options": [
            { "label": "Ninguna (usar escala base)", "value": "" },
            { "label": "viridis",   "value": "viridis" },
            { "label": "magma",     "value": "magma" },
            { "label": "plasma",    "value": "plasma" },
            { "label": "cividis",   "value": "cividis" },
            { "label": "turbo",     "value": "turbo" },
            { "label": "Spectral",  "value": "Spectral" },
            { "label": "Rojos",     "value": "reds" },
            { "label": "Verdes",    "value": "greens" },
            { "label": "Azules",    "value": "blues" },
            { "label": "Violetas",  "value": "purples" },
            { "label": "Naranjas",  "value": "oranges" }
          ],
          "defaultValue": ""
        },
        {
          "id": "customPalette",
          "label": "Paleta personalizada (#hex,#hex,...)",
          "type": "TEXTINPUT",
          "defaultValue": ""
        },
        {
          "id": "opacity",
          "label": "Opacidad del relleno",
          "type": "OPACITY",
          "defaultValue": 0.45
        },
        {
          "id": "colorMissing",
          "label": "Color para valores faltantes",
          "type": "FILL_COLOR",
          "defaultValue": "#cccccc"
        }
      ]
    },
    {
      "id": "borders",
      "label": "Bordes",
      "elements": [
        {
          "id": "showBorders",
          "label": "Mostrar bordes",
          "type": "CHECKBOX",
          "defaultValue": true
        },
        {
          "id": "borderColor",
          "label": "Color del borde",
          "type": "FILL_COLOR",
          "defaultValue": "#000000"
        },
        {
          "id": "borderWidth",
          "label": "Grosor del borde (px)",
          "type": "NUMBER",
          "defaultValue": 1
        },
        {
          "id": "borderOpacity",
          "label": "Opacidad del borde",
          "type": "OPACITY",
          "defaultValue": 1
        }
      ]
    },
    {
      "id": "legend",
      "label": "Leyenda y etiquetas",
      "elements": [
        {
          "id": "showLegend",
          "label": "Mostrar leyenda",
          "type": "CHECKBOX",
          "defaultValue": true
        },
        {
          "id": "legendPosition",
          "label": "Posición de la leyenda",
          "type": "SELECT",
          "options": [
            { "label": "Abajo derecha", "value": "bottomright" },
            { "label": "Abajo izquierda", "value": "bottomleft" },
            { "label": "Arriba derecha", "value": "topright" },
            { "label": "Arriba izquierda", "value": "topleft" }
          ],
          "defaultValue": "bottomright"
        },
        {
          "id": "showLabels",
          "label": "Mostrar etiquetas (tooltip centrado)",
          "type": "CHECKBOX",
          "defaultValue": false
        }
      ]
    },
    {
      "id": "popup",
      "label": "Popup",
      "elements": [
        {
          "id": "popupFormat",
          "label": "Formato del popup",
          "type": "TEXTINPUT",
          "defaultValue": "<strong>{{nombre}}</strong><br/>Valor: {{valor}}"
        }
      ]
    }
  ]
}
