{
  "data": {
    "supportedTransforms": [
      { "type": "geo_transform" }
    ]
  },
  "fields": {
    "geoDimension": {
      "name": "Dimensión de Texto (GeoJSON ID)",
      "types": ["TEXT"],
      "required": true,
      "max": 1,
      "description": "Arrastrá la dimensión que coincide con el ID/nombre del área en el GeoJSON."
    },
    "metricPrimary": {
      "name": "Métrica Principal",
      "types": ["NUMBER"],
      "required": true,
      "max": 1,
      "description": "Métrica usada para colorear las áreas del mapa."
    }
  },
  "style": {
    "mapStyle": {
      "name": "Estilo del Mapa",
      "elements": [
        {
          "type": "TEXTINPUT",
          "id": "geojsonProperty",
          "name": "Propiedad de GeoJSON a Coincidir",
          "value": "name",
          "placeholder": "Ej.: 'name', 'barrio', 'COMUNA'"
        },

        {
          "type": "COLOR_PALETTE",
          "id": "colorPalette",
          "name": "Paleta de Colores",
          "value": { "mode": "sequential", "colors": ["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"] }
        },
        {
          "type": "SELECT_SINGLE",
          "id": "colorScale",
          "name": "Escala (si no hay paleta)",
          "options": [
            { "label": "Verde → Rojo",    "value": "greenToRed" },
            { "label": "Azul → Amarillo", "value": "blueToYellow" },
            { "label": "Grises",          "value": "grayscale" },
            { "label": "Amarillos",       "value": "yellow" }
          ],
          "value": "greenToRed"
        },
        {
          "type": "CHECKBOX",
          "id": "invertScale",
          "name": "Invertir escala",
          "value": false
        },

        {
          "type": "SLIDER",
          "id": "opacity",
          "name": "Opacidad de relleno",
          "value": 0.8,
          "min": 0,
          "max": 1,
          "step": 0.05
        },

        {
          "type": "CHECKBOX",
          "id": "showBorders",
          "name": "Mostrar bordes",
          "value": true
        },
        {
          "type": "COLOR",
          "id": "borderColor",
          "name": "Color del borde",
          "value": { "color": "#000000" }
        },
        {
          "type": "SLIDER",
          "id": "borderWidth",
          "name": "Grosor del borde",
          "value": 1,
          "min": 0,
          "max": 6,
          "step": 1
        },
        {
          "type": "SLIDER",
          "id": "borderOpacity",
          "name": "Opacidad del borde",
          "value": 1,
          "min": 0,
          "max": 1,
          "step": 0.05
        },

        {
          "type": "CHECKBOX",
          "id": "showLabels",
          "name": "Mostrar etiquetas",
          "value": true
        },
        {
          "type": "CHECKBOX",
          "id": "showLegend",
          "name": "Mostrar leyenda",
          "value": true
        },
        {
          "type": "SELECT_SINGLE",
          "id": "legendPosition",
          "name": "Posición de la leyenda",
          "options": [
            { "label": "Arriba izq.",  "value": "topleft" },
            { "label": "Arriba der.",  "value": "topright" },
            { "label": "Abajo izq.",   "value": "bottomleft" },
            { "label": "Abajo der.",   "value": "bottomright" }
          ],
          "value": "bottomright"
        },

        {
          "type": "COLOR",
          "id": "colorMissing",
          "name": "Color sin dato",
          "value": { "color": "#cccccc" }
        },
        {
          "type": "TEXTINPUT",
          "id": "popupFormat",
          "name": "Formato del popup",
          "value": "<strong>{{nombre}}</strong><br/>Valor: {{valor}}"
        },

        {
          "type": "SELECT_SINGLE",
          "id": "nivelJerarquia",
          "name": "Nivel",
          "options": [
            { "label": "Barrio", "value": "barrio" },
            { "label": "Comuna", "value": "comuna" }
          ],
          "value": "barrio"
        }
      ]
    }
  }
}
