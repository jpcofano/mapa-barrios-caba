{
  "data": [
    {
      "id": "datos",
      "label": "Datos",
      "elements": [
        {
          "id": "geoDimension",
          "label": "ID del polígono (Geo/Texto)",
          "type": "DIMENSION",
          "options": { "min": 1, "max": 1, "supportedTypes": ["GEO", "TEXT"] }
        },
        {
          "id": "metricPrimary",
          "label": "Métrica principal (color)",
          "type": "METRIC",
          "options": { "min": 1, "max": 1 }
        }
      ]
    }
  ],
  "style": [
    {
      "id": "mapSetup",
      "label": "Mapa / GeoJSON",
      "elements": [
        {
          "type": "SELECT_SINGLE",
          "id": "nivelJerarquia",
          "label": "Nivel",
          "options": [
            { "label": "Barrios", "value": "barrio" },
            { "label": "Comunas", "value": "comuna" }
          ],
          "defaultValue": "barrio"
        },
        {
          "type": "TEXTINPUT",
          "id": "geojsonProperty",
          "label": "Propiedad de nombre en GeoJSON (opcional)",
          "placeholder": "Ej.: NOMBRE_BARRIO"
        }
      ]
    },
    {
      "id": "paint",
      "label": "Colores y escala",
      "elements": [
        {
          "type": "SELECT_SINGLE",
          "id": "colorScale",
          "label": "Escala continua",
          "options": [
            { "label": "Verde → Rojo", "value": "greenToRed" },
            { "label": "Azul → Amarillo", "value": "blueToYellow" },
            { "label": "Grises", "value": "grayscale" },
            { "label": "Amarillos", "value": "yellow" }
          ],
          "defaultValue": "greenToRed"
        },
        { "type": "CHECKBOX", "id": "invertScale", "label": "Invertir escala", "defaultValue": false },
        { "type": "OPACITY", "id": "opacity", "label": "Opacidad de relleno", "defaultValue": 0.45 },
        {
          "type": "FILL_COLOR",
          "id": "colorMissing",
          "label": "Color nulos / sin dato",
          "defaultValue": { "color": "#cccccc" }
        },
        {
          "type": "TEXTINPUT",
          "id": "customPalette",
          "label": "Paleta personalizada (hex separados por coma)",
          "placeholder": "#f7fbff,#6baed6,#08306b"
        },
        {
          "type": "SELECT_SINGLE",
          "id": "colorPalette",
          "label": "Paleta predefinida (categórica)",
          "options": [
            { "label": "Viridis", "value": "viridis" },
            { "label": "Blues", "value": "blues" },
            { "label": "Greens", "value": "greens" },
            { "label": "Reds", "value": "reds" },
            { "label": "Purples", "value": "purples" },
            { "label": "Oranges", "value": "oranges" }
          ],
          "defaultValue": "viridis"
        }
      ]
    },
    {
      "id": "borders",
      "label": "Bordes",
      "elements": [
        { "type": "CHECKBOX", "id": "showBorders", "label": "Mostrar bordes", "defaultValue": true },
        { "type": "BORDER_COLOR", "id": "borderColor", "label": "Color de borde", "defaultValue": { "color": "#000000" } },
        { "type": "LINE_WEIGHT", "id": "borderWidth", "label": "Grosor de borde", "defaultValue": 1 },
        { "type": "OPACITY", "id": "borderOpacity", "label": "Opacidad de borde", "defaultValue": 1 }
      ]
    },
    {
      "id": "labelsLegend",
      "label": "Etiquetas y leyenda",
      "elements": [
        { "type": "CHECKBOX", "id": "showLabels", "label": "Mostrar etiquetas (tooltip)", "defaultValue": true },
        { "type": "CHECKBOX", "id": "showLegend", "label": "Mostrar leyenda", "defaultValue": true },
        {
          "type": "SELECT_RADIO",
          "id": "legendPosition",
          "label": "Posición de la leyenda",
          "options": [
            { "label": "Arriba izq.", "value": "topleft" },
            { "label": "Arriba der.", "value": "topright" },
            { "label": "Abajo izq.", "value": "bottomleft" },
            { "label": "Abajo der.", "value": "bottomright" }
          ],
          "defaultValue": "bottomright"
        }
      ]
    },
    {
      "id": "popup",
      "label": "Popup",
      "elements": [
        {
          "type": "TEXTINPUT",
          "id": "popupFormat",
          "label": "Formato (usa {{nombre}} y {{valor}})",
          "defaultValue": "<strong>{{nombre}}</strong><br/>Valor: {{valor}}"
        }
      ]
    }
  ],
  "interactions": [{ "id": "filter", "supportedActions": ["FILTER"] }],
  "features": { "enableComparisonDateRange": false }
}
