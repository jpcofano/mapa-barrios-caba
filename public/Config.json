{
  "data": {
    "fields": {
      "geoDimension": {
        "name": "ID del polígono (GeoJSON)",
        "types": ["TEXT"],
        "required": true,
        "max": 1,
        "description": "Dimensión de texto que matchea con el nombre/ID del barrio en el GeoJSON."
      },
      "metricPrimary": {
        "name": "Métrica principal (color)",
        "types": ["NUMBER"],
        "required": true,
        "max": 1,
        "description": "Métrica numérica usada para colorear el polígono."
      }
    }
  },
  "style": [
    {
      "id": "mapSetup",
      "label": "Mapa / GeoJSON",
      "elements": [
        {
          "type": "select",
          "id": "nivelJerarquia",
          "label": "Nivel",
          "options": [
            { "label": "Barrios", "value": "barrio" },
            { "label": "Comunas", "value": "comuna" }
          ],
          "defaultValue": "barrio"
        },
        {
          "type": "text",
          "id": "geojsonProperty",
          "label": "Propiedad de nombre en GeoJSON (opcional)",
          "placeholder": "Ej.: NOMBRE_BARRIO"
        }
      ]
    },
    {
      "id": "paint",
      "label": "Colores y escala",
      "elements": [
        {
          "type": "select",
          "id": "colorScale",
          "label": "Escala",
          "options": [
            { "label": "Verde → Rojo", "value": "greenToRed" },
            { "label": "Azul → Amarillo", "value": "blueToYellow" },
            { "label": "Grises", "value": "grayscale" },
            { "label": "Amarillos", "value": "yellow" }
          ],
          "defaultValue": "greenToRed"
        },
        { "type": "checkbox", "id": "invertScale", "label": "Invertir escala", "defaultValue": false },
        { "type": "opacity",  "id": "opacity",     "label": "Opacidad de relleno", "defaultValue": 0.45 },
        { "type": "color",    "id": "colorMissing","label": "Color para nulos/sin dato", "defaultValue": "#cccccc" },
        {
          "type": "text",
          "id": "customPalette",
          "label": "Paleta personalizada (hex separados por coma)",
          "placeholder": "#f7fbff,#6baed6,#08306b"
        }
      ]
    },
    {
      "id": "borders",
      "label": "Bordes",
      "elements": [
        { "type": "checkbox",  "id": "showBorders",  "label": "Mostrar bordes",   "defaultValue": true },
        { "type": "color",     "id": "borderColor",  "label": "Color de borde",   "defaultValue": "#000000" },
        { "type": "lineWeight","id": "borderWidth",  "label": "Grosor de borde",  "defaultValue": 1 },
        { "type": "opacity",   "id": "borderOpacity","label": "Opacidad de borde","defaultValue": 1 }
      ]
    },
    {
      "id": "labelsLegend",
      "label": "Etiquetas y leyenda",
      "elements": [
        { "type": "checkbox", "id": "showLabels", "label": "Mostrar etiquetas (tooltip)", "defaultValue": true },
        { "type": "checkbox", "id": "showLegend", "label": "Mostrar leyenda", "defaultValue": true },
        {
          "type": "select",
          "id": "legendPosition",
          "label": "Posición de la leyenda",
          "options": [
            { "label": "Arriba izquierda", "value": "topleft" },
            { "label": "Arriba derecha",  "value": "topright" },
            { "label": "Abajo izquierda", "value": "bottomleft" },
            { "label": "Abajo derecha",   "value": "bottomright" }
          ],
          "defaultValue": "bottomright"
        }
      ]
    },
    {
      "id": "popup",
      "label": "Popup",
      "elements": [
        {
          "type": "text",
          "id": "popupFormat",
          "label": "Formato (usa {{nombre}} y {{valor}})",
          "defaultValue": "<strong>{{nombre}}</strong><br/>Valor: {{valor}}"
        }
      ]
    }
  ],
  "features": {}
}
